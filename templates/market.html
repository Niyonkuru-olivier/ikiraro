<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Price of the Maize in 2020-2024 in Rwanda (Kigali and East Province)- UMUHUZA</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='index.css') }}">
  <link rel="stylesheet" href="{{url_for('static', filename='market.css')}}">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="market-page">
  <!-- Header Section -->
  <header class="market-header">
    <div class="header-content">
        <!-- Insert your image here -->
        <img src="{{ url_for('static', filename='ikiraro.png') }}" alt="Ikiraro logo" class="logo">
        <div>
            <h1>UMUHUZA</h1>
            <p class="tagline">
                Revolutionizing agriculture through collaborative artificial intelligence
            </p>
            <nav>
                <ul>
                    <li><a href="{{ url_for('index') }}">Home</a></li>
                    <li><a href="{{ url_for('about_us') }}">About</a></li>
                    <li><a href="{{url_for('dash')}}">Dashboard</a></li>
                    <li class="dropdown">
                        <a href="{{url_for('login')}}" class="login-user">Login</a>
                    </li>
                    <li class="dropdown">
                        <a href="{{url_for('create_account')}}" class="login-user">Sign Up</a>
                    </li>
                    <li class="dropdown">
                        <a href="#services" class="login-user">Services</a>
                        <div class="dropdown-content">
                            <a href="{{url_for('service')}}">Extension Services</a>
                            <a href="{{url_for('irrigation')}}">Irrigation Technology</a>
                            <a href="{{url_for('weather')}}"> Weather Forecasting </a>
                            <a href="{{url_for('market')}}">Market Price</a>
                            <a href="{{ url_for('input_page')}}"> Input Information</a>
                        </div>
                    </li>
                    <li><a href="{{url_for('contact')}}">Contact-Us</a></li>
                </ul>
            </nav>
        </div>
    </div>
  </header>

  <main class="market-main">
    <!-- Hero -->
    <section class="hero">
      <div>
        <p class="eyebrow">Market intelligence brief</p>
        <h2>Rwanda maize market tracker (2020-2024)</h2>
        <p class="lede">
          Live reference data for Kigali City and Eastern Province spot markets. Filter by year or region to stress-test procurement plans and selling strategies.
        </p>
      </div>
      <div class="hero-meta">
        <p><strong>Data source:</strong> MINAGRI & district market boards</p>
        <p><strong>Cadence:</strong> Quarterly refresh (latest 2024 Q4)</p>
      </div>
    </section>

    <!-- KPI cards -->
    <section class="kpi-grid">
      <article class="kpi-card">
        <p class="kpi-label">Kigali average price · 2024</p>
        <p class="kpi-value" id="kigali-latest">–</p>
        <p class="kpi-trend" id="kigali-trend">Pending update</p>
      </article>
      <article class="kpi-card">
        <p class="kpi-label">Eastern average price · 2024</p>
        <p class="kpi-value" id="eastern-latest">–</p>
        <p class="kpi-trend" id="eastern-trend">Pending update</p>
      </article>
      <article class="kpi-card">
        <p class="kpi-label">Price gap (Kigali minus Eastern)</p>
        <p class="kpi-value" id="price-spread">–</p>
        <p class="kpi-trend">Positive values mean Kigali markets are higher.</p>
      </article>
      <article class="kpi-card">
        <p class="kpi-label">Most unstable year</p>
        <p class="kpi-value">2022</p>
        <p class="kpi-trend">Largest price swings due to rainfall shocks.</p>
      </article>
    </section>

    <!-- Search + instructions -->
    <section class="controls-panel">
      <div class="panel-copy">
        <h3>Filter the dataset</h3>
        <p>Type a year (2020-2024) or region name to narrow both the table and chart. Leave the box empty or press reset to return to the full time-series view.</p>
      </div>
      <div class="form-controls">
        <label for="search">Search period or region</label>
        <div class="form-row">
          <input type="text" id="search" placeholder="e.g. Kigali or 2023">
          <button type="button" onclick="searchPrices()">Apply filter</button>
        </div>
        <p class="search-hint" id="search-hint">Showing complete dataset.</p>
      </div>
    </section>

    <!-- Data + chart -->
    <section class="data-panels">
      <article class="panel table-panel">
        <div class="panel-header">
          <div>
            <p class="eyebrow">Reference table</p>
            <h3>Spot market prices (RWF / kg)</h3>
          </div>
          <p class="panel-note">Rows stay in year order so you can compare progression quickly.</p>
        </div>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Region</th>
                <th>Year</th>
                <th>Average price (RWF)</th>
              </tr>
            </thead>
            <tbody id="prices-body">
              <!-- rows injected via market.js -->
            </tbody>
          </table>
        </div>
      </article>

      <article class="panel chart-panel">
        <div class="panel-header">
          <div>
            <p class="eyebrow">Time series</p>
            <h3>Price evolution</h3>
          </div>
          <p class="panel-note">Both provinces shown on the same scale with a gentle smoothing band.</p>
        </div>
        <canvas id="price-chart"></canvas>
        <p class="chart-hint" id="chart-hint">Hover or tap the points to see both regions for the same year.</p>
      </article>
    </section>
  </main>

  <script src="{{url_for('static', filename='market.js')}}"></script>
</body>
</html>
